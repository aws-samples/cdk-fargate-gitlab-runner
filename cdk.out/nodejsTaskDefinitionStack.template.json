{
  "Resources": {
    "GitlabExecutionRoleFE69E778": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "ecs-tasks.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
              ]
            ]
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "nodejsTaskDefinitionStack/GitlabExecutionRole/Resource"
      }
    },
    "GitlabTaskRoleF5F511B8": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "ecs-tasks.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"
              ]
            ]
          }
        ],
        "Policies": [
          {
            "PolicyDocument": {
              "Statement": [
                {
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:DescribeLogStreams",
                    "logs:PutLogEvents"
                  ],
                  "Effect": "Allow",
                  "Resource": "arn:aws:logs:eu-west-1:339543652052:log-group:/Gitlab/*"
                }
              ],
              "Version": "2012-10-17"
            },
            "PolicyName": "AllowListOrgUnitParent"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "nodejsTaskDefinitionStack/GitlabTaskRole/Resource"
      }
    },
    "nodejsTaskDefinition": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Image": {
              "Fn::Join": [
                "",
                [
                  "339543652052.dkr.ecr.eu-west-1.",
                  {
                    "Ref": "AWS::URLSuffix"
                  },
                  "/aws-cdk/assets:aaa1c797a73234aea064a9babfe32a88adc74459825876661e3caa2cb4b023e5"
                ]
              ]
            },
            "LogConfiguration": {
              "LogDriver": "awslogs",
              "Options": {
                "awslogs-group": "/Gitlab/Runner/",
                "awslogs-region": "eu-west-1",
                "awslogs-stream-prefix": "fargate"
              }
            },
            "Name": "ci-coordinator",
            "PortMappings": [
              {
                "ContainerPort": 22
              }
            ]
          }
        ],
        "Cpu": "512",
        "ExecutionRoleArn": {
          "Fn::GetAtt": [
            "GitlabExecutionRoleFE69E778",
            "Arn"
          ]
        },
        "Family": "nodejs",
        "Memory": "1024",
        "NetworkMode": "awsvpc",
        "TaskRoleArn": {
          "Fn::GetAtt": [
            "GitlabTaskRoleF5F511B8",
            "Arn"
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "nodejsTaskDefinitionStack/nodejsTaskDefinition"
      }
    },
    "CDKMetadata": {
      "Type": "AWS::CDK::Metadata",
      "Properties": {
        "Analytics": "v2:deflate64:H4sIAAAAAAAA/yWMwQ6CMBBEv4V7WRQTE28qXLyZ6g80dcG10jXdEkOa/ruAp5nMy5stbOsaNsXRfKW0D1clywEh3aKxTp1EMM61J9+rhr3EMNqoms5rFB6DxawWMZEZIGl+48rmzAptKM3iC7RsHYbLYHpcHxcGGj8sFDlMZyM4TwKzezfiWuzIUyT2OavrFJ/sqx0cYF+8hKgMo480IOh//gBhAiqlwgAAAA=="
      },
      "Metadata": {
        "aws:cdk:path": "nodejsTaskDefinitionStack/CDKMetadata/Default"
      }
    }
  }
}